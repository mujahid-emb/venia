{"version":3,"sources":["../../src/Peregrine/Peregrine.js"],"names":["createElement","Provider","ReduxProvider","createStore","MagentoRouter","bootstrap","apiBase","__tmp_webpack_public_path__","process","env","NODE_ENV","Error","store","routerProps","ensureDirURI","uri","endsWith"],"mappings":"AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,SAASC,YAAYC,aAArB,QAA0C,aAA1C;AACA,OAAOC,WAAP,MAAwB,UAAxB;AACA,OAAOC,aAAP,MAA0B,WAA1B;;AAEA;;;;;;AAMA,eAAe,SAASC,SAAT,CAAmB,EAAEC,OAAF,EAAWC,2BAAX,EAAnB,EAA6D;AACxE;AACA,QAAIC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,gBAAgBL,SAA7D,EAAwE;AACpE,cAAM,IAAIM,KAAJ,CACF,wCACI,yCADJ,GAEI,6CAHF,CAAN;AAKH;;AAED,UAAMC,QAAQT,aAAd;AACA,UAAMU,cAAc;AAChBP,eADgB;AAEhBC,qCAA6BO,aAAaP,2BAAb;AAFb,KAApB;AAIA,UAAMN,WAAW,MACb;AAAC,qBAAD;AAAA,UAAe,OAAOW,KAAtB;AACI,sBAAC,aAAD,EAAmBC,WAAnB;AADJ,KADJ;;AAMA,WAAO,EAAED,KAAF,EAASX,QAAT,EAAP;AACH;;AAED;;;;AAIA,SAASa,YAAT,CAAsBC,GAAtB,EAA2B;AACvB,WAAOA,IAAIC,QAAJ,CAAa,GAAb,IAAoBD,GAApB,GAA0BA,MAAM,GAAvC;AACH","file":"Peregrine.js","sourcesContent":["import { createElement } from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport createStore from '../store';\nimport MagentoRouter from '../Router';\n\n/**\n *\n * @param {string} apiBase Absolute URL pointing to the GraphQL endpoint\n * @param {string} __tmp_webpack_public_path__ Temporary hack. Expects the `__webpack_public_path__` value\n * @returns {{ store: Store, Provider: () => JSX.Element }}\n */\nexport default function bootstrap({ apiBase, __tmp_webpack_public_path__ }) {\n    // Remove deprecation warning after 2 version bumps\n    if (process.env.NODE_ENV !== 'production' && this instanceof bootstrap) {\n        throw new Error(\n            'The API for Peregrine has changed. ' +\n                'Please see the Release Notes on Github ' +\n                'for instructions to update your application'\n        );\n    }\n\n    const store = createStore();\n    const routerProps = {\n        apiBase,\n        __tmp_webpack_public_path__: ensureDirURI(__tmp_webpack_public_path__)\n    };\n    const Provider = () => (\n        <ReduxProvider store={store}>\n            <MagentoRouter {...routerProps} />\n        </ReduxProvider>\n    );\n\n    return { store, Provider };\n}\n\n/**\n * Given a URI, will always return the same URI with a trailing slash\n * @param {string} uri\n */\nfunction ensureDirURI(uri) {\n    return uri.endsWith('/') ? uri : uri + '/';\n}\n"]}