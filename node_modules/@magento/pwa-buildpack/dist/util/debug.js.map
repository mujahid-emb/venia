{"version":3,"sources":["../../src/util/debug.js"],"names":["path","require","debug","root","resolve","__dirname","pkg","toolName","name","split","pop","makeTag","parts","join","taggedLogger","tag","logger","errorMsg","msg","sub","module","exports","makeFileLogger","p","segments","relative","sep","length"],"mappings":";;AAAA,MAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,MAAMC,QAAQD,QAAQ,OAAR,CAAd;AACA,MAAME,OAAOH,KAAKI,OAAL,CAAaC,SAAb,EAAwB,KAAxB,CAAb;AACA,MAAMC,MAAML,QAAQD,KAAKI,OAAL,CAAaD,IAAb,EAAmB,iBAAnB,CAAR,CAAZ;AACA,MAAMI,WAAWD,IAAIE,IAAJ,CAASC,KAAT,CAAe,GAAf,EAAoBC,GAApB,EAAjB;AACA,MAAMC,UAAU,CAAC,GAAGC,KAAJ,KAAcA,MAAMC,IAAN,CAAW,GAAX,CAA9B;;AAEA,MAAMC,eAAeC,OAAO;AACxB,UAAMC,SAASd,MAAMa,GAAN,CAAf;AACAC,WAAOC,QAAP,GAAkBC,OAAQ,IAAGH,GAAI,KAAIG,GAAI,EAAzC;AACAF,WAAOG,GAAP,GAAaA,OAAOL,aAAaH,QAAQI,GAAR,EAAaI,GAAb,CAAb,CAApB;AACA,WAAOH,MAAP;AACH,CALD;AAMAI,OAAOC,OAAP,GAAiB;AACbC,mBAAeC,CAAf,EAAkB;AACd,cAAMC,WAAWxB,KAAKyB,QAAL,CAActB,IAAd,EAAoBoB,CAApB,EAAuBd,KAAvB,CAA6BT,KAAK0B,GAAlC,CAAjB;AACA,YAAIF,SAASA,SAASG,MAAT,GAAkB,CAA3B,MAAkC,UAAtC,EAAkD;AAC9CH,qBAASd,GAAT;AACH;AACD,cAAMK,MAAMJ,QAAQJ,QAAR,EAAkB,GAAGiB,QAArB,CAAZ;AACA,eAAOV,aAAaC,GAAb,CAAP;AACH;AARY,CAAjB","file":"debug.js","sourcesContent":["const path = require('path');\nconst debug = require('debug');\nconst root = path.resolve(__dirname, '../');\nconst pkg = require(path.resolve(root, '../package.json'));\nconst toolName = pkg.name.split('/').pop();\nconst makeTag = (...parts) => parts.join(':');\n\nconst taggedLogger = tag => {\n    const logger = debug(tag);\n    logger.errorMsg = msg => `[${tag}] ${msg}`;\n    logger.sub = sub => taggedLogger(makeTag(tag, sub));\n    return logger;\n};\nmodule.exports = {\n    makeFileLogger(p) {\n        const segments = path.relative(root, p).split(path.sep);\n        if (segments[segments.length - 1] === 'index.js') {\n            segments.pop();\n        }\n        const tag = makeTag(toolName, ...segments);\n        return taggedLogger(tag);\n    }\n};\n"]}